# SQL-executer SQL Practice App

ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ SQL ã‚’æ›¸ã„ã¦å®Ÿè¡Œã§ãã‚‹ç·´ç¿’ç”¨ã‚¢ãƒ—ãƒªã§ã™ã€‚
æœ€åˆã¯ Next.js ã ã‘ã§å‹•ãæ§‹æˆã‹ã‚‰å§‹ã‚ã¦ã„ã¾ã™ã€‚

---

## ğŸ‰ å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ï¼ˆMVPå®Œæˆï¼‰

### åŸºæœ¬æ©Ÿèƒ½

- âœ… SQL ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆtextarea / å¾Œã€… Monaco ã¸ç½®ãæ›ãˆäºˆå®šï¼‰
- âœ… æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
  - SQLite ã® `EXPLAIN` ã‚’ä½¿ç”¨ã—ã¦æ§‹æ–‡ã®å¦¥å½“æ€§ã‚’ç¢ºèª
- âœ… SQL å®Ÿè¡Œï¼ˆSELECT ã®ã¿è¨±å¯ï¼‰
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ã€SELECTæ–‡ã®ã¿å®Ÿè¡Œå¯èƒ½
- âœ… å®Ÿè¡Œçµæœã®ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º
  - ã‚«ãƒ©ãƒ å
  - è¡Œãƒ‡ãƒ¼ã‚¿
  - ä»¶æ•°
  - å®Ÿè¡Œæ™‚é–“ï¼ˆmsï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
- âœ… ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

### ä»Šå¾Œè¿½ã€…è¿½åŠ äºˆå®š

- ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ãƒ»ã‚¹ã‚­ãƒ¼ãƒæƒ…å ±ã®è¡¨ç¤º  
- Monaco Editor å¯¾å¿œ  
- å•é¡Œãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚¯ã‚¨ãƒªæ¡ç‚¹ï¼‰  
- ã‚¯ã‚¨ãƒªå±¥æ­´  
- DB åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ  
- èªè¨¼ï¼ˆå¿…è¦ã§ã‚ã‚Œã°ï¼‰

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### Frontend / App

- Next.js 16.0.3 (App Router with Turbopack)
- React 19.2.0
- TypeScript 5.9.3
- Chakra UI v3ï¼ˆUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ã‚¹ã‚¿ã‚¤ãƒ«ç®¡ç†ï¼‰
- Framer Motionï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

### Backendï¼ˆNext.jså†…ã® API Routesï¼‰

- `/api/execute` â€” SQL å®Ÿè¡Œ
- `/api/lint` â€” æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
- Prisma 7.0.1
  - ã‚¹ã‚­ãƒ¼ãƒç®¡ç†
  - ç”Ÿ SQL å®Ÿè¡Œï¼ˆ`$queryRawUnsafe`ï¼‰
  - Better SQLite3ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ä½¿ç”¨

### Database

- SQLiteï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«: `prisma/dev.db`ï¼‰
- Prisma schema ã«ã‚ˆã‚‹ç°¡æ˜“å®šç¾©
  - User ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆid, email, name, age, createdAtï¼‰
  - Post ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆid, title, content, published, authorId, createdAtï¼‰
- ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥æ¸ˆã¿

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
src/
  app/
    page.tsx              # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
    layout.tsx            # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
    api/
      execute/
        route.ts          # SQLå®Ÿè¡ŒAPI
      lint/
        route.ts          # æ§‹æ–‡ãƒã‚§ãƒƒã‚¯API
  components/
    SqlEditor.tsx         # SQLã‚¨ãƒ‡ã‚£ã‚¿ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    ResultTable.tsx       # çµæœè¡¨ç¤ºãƒ†ãƒ¼ãƒ–ãƒ«
    ui/
      provider.tsx        # Chakra UIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
      color-mode.tsx      # ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
  lib/
    prisma.ts             # Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³
prisma/
  schema.prisma           # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
  seed.ts                 # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
  migrations/             # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
prisma.config.ts          # Prisma 7è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```

---

## é–‹ç™ºãƒ•ãƒ­ãƒ¼

1. âœ… **Phase 1: MVPå®Œæˆ** â€” Next.js ã ã‘ã§åŸºæœ¬æ©Ÿèƒ½ã‚’å®Ÿè£…
2. **Phase 2: ã‚¨ãƒ‡ã‚£ã‚¿å¼·åŒ–** â€” Monaco Editor ã¸ã®ç½®ãæ›ãˆ
3. **Phase 3: æ©Ÿèƒ½è¿½åŠ ** â€” ã‚¹ã‚­ãƒ¼ãƒé–²è¦§ãƒ»ç°¡æ˜“ãƒ‰ãƒªãƒ«æ©Ÿèƒ½ã‚’è¿½åŠ 
4. **Phase 4: ã‚¹ã‚±ãƒ¼ãƒ«** â€” å¿…è¦ã«å¿œã˜ã¦ Go ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸åˆ†é›¢

---

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆï¼‰
npx prisma migrate dev

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
npx prisma db seed
```

### 3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ [http://localhost:3000](http://localhost:3000) ã‚’é–‹ã„ã¦ãã ã•ã„ã€‚

---

## ä½¿ã„æ–¹

1. **SQLã‚¨ãƒ‡ã‚£ã‚¿**ã«ã‚¯ã‚¨ãƒªã‚’å…¥åŠ›ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `SELECT * FROM User;` ãŒå…¥åŠ›æ¸ˆã¿ï¼‰
2. **å®Ÿè¡Œãƒœã‚¿ãƒ³**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦SQLã‚’å®Ÿè¡Œ
3. **æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ãƒœã‚¿ãƒ³**ã§äº‹å‰ã«æ§‹æ–‡ã®å¦¥å½“æ€§ã‚’ç¢ºèªå¯èƒ½
4. å®Ÿè¡ŒçµæœãŒãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§è¡¨ç¤ºã•ã‚Œã¾ã™

### ã‚µãƒ³ãƒ—ãƒ«ã‚¯ã‚¨ãƒª

```sql
-- å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—
SELECT * FROM User;

-- ç‰¹å®šã®å¹´é½¢ä»¥ä¸Šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—
SELECT * FROM User WHERE age >= 28;

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨æŠ•ç¨¿ã‚’JOIN
SELECT User.name, Post.title, Post.published
FROM User
JOIN Post ON User.id = Post.authorId;

-- å…¬é–‹æ¸ˆã¿ã®æŠ•ç¨¿ã®ã¿å–å¾—
SELECT * FROM Post WHERE published = 1;
```

---

## Prisma 7ã¸ã®ç§»è¡Œã«ã¤ã„ã¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯Prisma 7ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ä¸»ãªå¤‰æ›´ç‚¹:

- ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹URLã¯ `prisma.config.ts` ã§ç®¡ç†
- SQLiteç”¨ã® `@prisma/adapter-better-sqlite3` ã‚’ä½¿ç”¨
- ã‚·ãƒ¼ãƒ‰ã‚³ãƒãƒ³ãƒ‰ã‚‚ `prisma.config.ts` ã§è¨­å®š

è©³ç´°ã¯[Prisma 7 Upgrade Guide](https://www.prisma.io/docs/orm/more/upgrade-guides/upgrading-versions/upgrading-to-prisma-7)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸã„

```bash
npx prisma migrate reset
```

### Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å†ç”Ÿæˆ

```bash
npx prisma generate
```
